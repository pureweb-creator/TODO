{"version":3,"file":"../../main.min.js","sources":["main.js"],"sourcesContent":["Vue.component('todo-list', {\r\n    template: '#todo-list-template',\r\n    data() {\r\n        return {\r\n            json: [],\r\n            task: '',\r\n            checkBoxChecked: false,\r\n            checkBoxCheckedList: [],\r\n            isActive: false,\r\n            isReadOnly: true,\r\n            soundSelect: new Audio(\"static/sounds/select.mp3\"),\r\n            soundEvent: new Audio(\"static/sounds/doing.mp3\"),\r\n            text:{\r\n                error: \"\",\r\n                emptyList: \"Список пуст.\"\r\n            }\r\n        }\r\n    },\r\n    props: {\r\n        list: {required: true},\r\n        title: {required: true}\r\n    },\r\n    computed: {\r\n        isEmpty: function() {\r\n            return this.json.length == 0\r\n        },\r\n        isEmptyCheckboxList: function(){\r\n            return this.checkBoxCheckedList.length == 0\r\n        }\r\n    },\r\n    methods: {\r\n        toggleClass: function (){\r\n            this.soundEvent.play()\r\n            return this.isActive = !this.isActive\r\n        },\r\n        toggleTaskView: function(index){\r\n            this.soundEvent.play()\r\n            this.uncheckAll()\r\n\r\n            // toggle classes\r\n            let item = this.json[index]\r\n            item.active = !item.active\r\n            this.select(index)\r\n\r\n            // uncheck all except current\r\n            this.checkBoxCheckedList.push(item.id)\r\n\r\n            this.$set(this.json, index, item)\r\n            this.$nextTick(() => this.$refs.edit_task[index].focus())\r\n        },\r\n        deleteSelected: function(){\r\n            this.soundEvent.play()\r\n            axios.get('scripts/delete.php?table='+this.list+'&id='+this.checkBoxCheckedList)\r\n                .then(response=>console.log(response.data))            \r\n            this.read()\r\n            this.task = \"\"\r\n            this.checkBoxCheckedList = []\r\n        },\r\n        // просто добавляет класс к выбранному пункту. Добавление в массив происходит через v-model\r\n        select: function(element){\r\n            this.soundEvent.play()\r\n            let item = this.json[element]\r\n            item.selected = !item.selected\r\n            this.$set(this.json, element, item)\r\n        },\r\n        // По нажатию на кнопку \"выбрать все\", скриптом пушим в массив все чекбоксы.\r\n        selectAll: function(){\r\n            this.soundEvent.play()\r\n\r\n            this.json.forEach(element => {\r\n                this.checkBoxCheckedList.push(element.id)\r\n                element.selected = true\r\n            });\r\n        },\r\n        uncheckAll: function(){\r\n            this.soundEvent.play()\r\n            this.json.forEach(element => {\r\n                this.checkBoxCheckedList.splice(element)\r\n                element.selected = false\r\n                element.active = false\r\n            })\r\n        },\r\n        read: function(){\r\n            // Один раз почему-то  очень плохо работает..\r\n            for (let i = 0; i < 2; i++) {\r\n                axios\r\n                    .get('scripts/handle.php?table='+this.list)\r\n                    .then(response=>this.json=response.data)\r\n                    .catch(error=>console.log(error))    \r\n            }\r\n            \r\n        },\r\n        del: function(index){\r\n            this.soundEvent.play()\r\n            axios.get('scripts/delete.php?id='+index.id+'&table='+this.list)\r\n            this.read()\r\n            this.task = \"\"\r\n        },\r\n        edit: function(index){\r\n            this.soundEvent.play()\r\n            if(index.title.length == 0){\r\n                this.text.error = \"Ошибка! Пустое поле.\"\r\n                return false\r\n            }\r\n            this.text.error = \"\"\r\n            this.checkBoxCheckedList.splice(index)\r\n            \r\n            axios.get('scripts/edit.php?table='+this.list+\"&id=\"+index.id+\"&task=\"+index.title)\r\n            this.read()\r\n            index.title = \"\"\r\n        },\r\n        addTask: function(){\r\n            this.soundEvent.play()\r\n            if(!this.task){\r\n                this.text.error = \"Ошибка! Пустое поле.\"\r\n                return false\r\n            }\r\n            this.text.error = \"\"\r\n\r\n            axios.get('scripts/add.php?task='+this.task+\"&table=\"+this.list)\r\n            this.read()\r\n            this.task = \"\"\r\n        }\r\n    },\r\n    created: function () {\r\n        this.read()\r\n    }\r\n});\r\n\r\nnew Vue({\r\n    el: \"#app\",\r\n    methods: {\r\n        logout: function(){\r\n            axios\r\n                .get('scripts/sign-up/logout.php')\r\n                .then(response=>console.log(response.data))\r\n                .catch(error=>console.log(error.data));\r\n            window.location.href = './sign-in.php';\r\n        }\r\n    }\r\n});\r\n\r\n"],"names":["Vue","component","template","data","json","task","checkBoxChecked","checkBoxCheckedList","isActive","isReadOnly","soundSelect","Audio","soundEvent","text","error","emptyList","props","list","required","title","computed","isEmpty","this","length","isEmptyCheckboxList","methods","toggleClass","play","toggleTaskView","index","uncheckAll","let","item","active","select","push","id","$set","$nextTick","$refs","edit_task","focus","deleteSelected","axios","get","then","response","console","log","read","element","selected","selectAll","forEach","splice","i","catch","del","edit","addTask","created","el","logout","window","location","href"],"mappings":"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"}