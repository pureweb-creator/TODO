{"version":3,"file":"../../main.min.js","sources":["main.js"],"sourcesContent":["Vue.component('todo-list', {\r\n    template: '#todo-list-template',\r\n    data() {\r\n        return {\r\n            json: [],\r\n            task: '',\r\n            checkBoxChecked: false,\r\n            checkBoxCheckedList: [],\r\n            isActive: false,\r\n            isReadOnly: true,\r\n            soundSelect: new Audio(\"static/sounds/select.mp3\"),\r\n            soundEvent: new Audio(\"static/sounds/doing.mp3\"),\r\n            text:{\r\n                error: \"\",\r\n                emptyList: \"Список пуст.\"\r\n            }\r\n        }\r\n    },\r\n    props: {\r\n        list: {required: true},\r\n        title: {required: true}\r\n    },\r\n    computed: {\r\n        isEmpty: function() {\r\n            return this.json.length === 0\r\n        },\r\n        isEmptyCheckboxList: function(){\r\n            return this.checkBoxCheckedList.length === 0\r\n        }\r\n    },\r\n    methods: {\r\n        toggleClass: function (){\r\n            this.soundEvent.play()\r\n            this.uncheckAll()\r\n            return this.isActive = !this.isActive\r\n        },\r\n        toggleTaskView: function(index,element){\r\n            this.soundEvent.play()\r\n            this.uncheckAll()\r\n\r\n            // toggle classes\r\n            let item = this.json[index]\r\n            item.active = !item.active\r\n            this.select(index)\r\n\r\n            // uncheck all except current\r\n            this.checkBoxCheckedList.push(item.id)\r\n\r\n            this.$set(this.json, index, item)\r\n            this.$nextTick(() => this.$refs.edit_task[index].focus())\r\n        },\r\n        deleteSelected: function(){\r\n            this.soundEvent.play()\r\n            axios.get('scripts/delete.php?table='+this.list+'&id='+this.checkBoxCheckedList)\r\n                .then(response=>console.log(response.data))            \r\n            this.read()\r\n            this.task = \"\"\r\n            this.checkBoxCheckedList = []\r\n        },\r\n\r\n        // Добавление в массив происходит через v-model\r\n        select: function(element){\r\n            this.soundEvent.play()\r\n            let item = this.json[element]\r\n            item.selected = !item.selected\r\n            this.$set(this.json, element, item)\r\n        },\r\n\r\n        // По нажатию на кнопку \"выбрать все\", скриптом пушим в массив все чекбоксы.\r\n        checkAll: function(){\r\n            this.soundEvent.play()\r\n\r\n            this.json.forEach(element => {\r\n                this.checkBoxCheckedList.push(element.id)\r\n                element.selected = true\r\n            });\r\n        },\r\n        uncheckAll: function(){\r\n            this.soundEvent.play()\r\n            this.json.forEach(element => {\r\n                this.checkBoxCheckedList.splice(element)\r\n                element.selected = false\r\n                element.active = false\r\n            })\r\n        },\r\n\r\n        // create\r\n        addTask: function(){\r\n            this.soundEvent.play()\r\n            this.uncheckAll()\r\n            \r\n            if(!this.task){\r\n                this.text.error = \"Ошибка! Пустое поле.\"\r\n                return false\r\n            }\r\n            this.text.error = \"\"\r\n\r\n            axios.get('scripts/add.php?task='+this.task+\"&table=\"+this.list)\r\n            this.read()\r\n            this.task = \"\"\r\n        },\r\n        //retrieve\r\n        read: function(){\r\n            // Один раз почему-то  очень плохо работает..\r\n            for (let i = 0; i < 2; i++) {\r\n                axios\r\n                    .get('scripts/handle.php?table='+this.list)\r\n                    .then(response=>this.json=response.data)\r\n                    .catch(error=>console.log(error))    \r\n            }\r\n        },\r\n        // update\r\n        edit: function(element){\r\n            this.soundEvent.play()\r\n            if(element.title.length == 0){\r\n                this.text.error = \"Ошибка! Пустое поле.\"\r\n                return false\r\n            }\r\n            this.text.error = \"\"\r\n            this.checkBoxCheckedList.splice(element)\r\n            \r\n            axios.get('scripts/edit.php?table='+this.list+\"&id=\"+element.id+\"&task=\"+element.title)\r\n            this.read()\r\n            element.title = \"\"\r\n        },\r\n        // delete\r\n        del: function(element){\r\n            this.soundEvent.play()\r\n            axios.get('scripts/delete.php?id='+element.id+'&table='+this.list)\r\n            this.read()\r\n            this.task = \"\"\r\n        },\r\n    },\r\n    created: function () {\r\n        this.read()\r\n        this.soundEvent.volume = this.soundSelect.volume = 1\r\n    }\r\n});\r\n\r\nnew Vue({\r\n    el: \"#app\",\r\n    methods: {\r\n        logout: function(){\r\n            axios\r\n                .get('scripts/sign-up/logout.php')\r\n                .then(response=>console.log(response.data))\r\n                .catch(error=>console.log(error.data));\r\n            window.location.href = './sign-in.php';\r\n        }\r\n    }\r\n});\r\n\r\n"],"names":["Vue","component","template","data","json","task","checkBoxChecked","checkBoxCheckedList","isActive","isReadOnly","soundSelect","Audio","soundEvent","text","error","emptyList","props","list","required","title","computed","isEmpty","this","length","isEmptyCheckboxList","methods","toggleClass","play","uncheckAll","toggleTaskView","index","element","let","item","active","select","push","id","$set","$nextTick","$refs","edit_task","focus","deleteSelected","axios","get","then","response","console","log","read","selected","checkAll","forEach","splice","addTask","i","catch","edit","del","created","volume","el","logout","window","location","href"],"mappings":"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"}